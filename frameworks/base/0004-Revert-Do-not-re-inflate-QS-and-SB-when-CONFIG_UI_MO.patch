From d0b74f3c51c253cfab77134fe9475b1c0fc26d97 Mon Sep 17 00:00:00 2001
From: s-rs <baradsubhashis@gmail.com>
Date: Sun, 3 Sep 2023 09:46:41 +0000
Subject: [PATCH 4/7] Revert:Do not re-inflate QS and SB when CONFIG_UI_MODE

---
 .../com/android/systemui/fragments/FragmentHostManager.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/fragments/FragmentHostManager.java b/packages/SystemUI/src/com/android/systemui/fragments/FragmentHostManager.java
index 6a27ee7c0c89..d4bec3f1b1c4 100644
--- a/packages/SystemUI/src/com/android/systemui/fragments/FragmentHostManager.java
+++ b/packages/SystemUI/src/com/android/systemui/fragments/FragmentHostManager.java
@@ -58,7 +58,8 @@ public class FragmentHostManager {
     private final LeakDetector mLeakDetector;
     private final InterestingConfigChanges mConfigChanges = new InterestingConfigChanges(
             ActivityInfo.CONFIG_FONT_SCALE | ActivityInfo.CONFIG_LOCALE
-                    | ActivityInfo.CONFIG_ASSETS_PATHS);
+                    | ActivityInfo.CONFIG_ASSETS_PATHS
+                    | ActivityInfo.CONFIG_UI_MODE);
     private final FragmentService mManager;
     private final ExtensionFragmentManager mPlugins = new ExtensionFragmentManager();
 
-- 
2.25.1

